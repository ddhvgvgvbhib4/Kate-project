<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ - CyberSafe Net</title>
    <link rel="stylesheet" href="style.css">
	
</head>
<body>
    <div class="container admin-container">
        <header class="admin-header">
            <h1>üë®‚Äçüè´ –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º</h1>
            <nav>
                <a href="feed.html" class="btn btn-small">–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–µ–Ω—Ç—É</a>
                <a href="index.html" class="btn btn-small btn-logout">–í—ã–π—Ç–∏</a>
				<!-- –í —Å–µ–∫—Ü–∏—é —Å –Ω–∞–≤–∏–≥–∞—Ü–∏–µ–π (–≤ header) –¥–æ–±–∞–≤—å: -->
<a href="admin_analytics.html" class="btn btn-small" style="background-color: #9C27B0;">üìä –ê–Ω–∞–ª–∏—Ç–∏–∫–∞</a>
            </nav>
        </header>

        <main>
            <section class="admin-form">
                <h2>üìù –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –æ–±—É—á–∞—é—â–∏–π –ø–æ—Å—Ç</h2>
                <form id="newPostForm" onsubmit="return createNewPost(event)">
                    <div class="form-group">
                        <label for="postTitle">–ó–∞–≥–æ–ª–æ–≤–æ–∫ –ø–æ—Å—Ç–∞:</label>
                        <input type="text" id="postTitle" required placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –û—Å—Ç–æ—Ä–æ–∂–Ω–æ, —Ñ–∏—à–∏–Ω–≥!">
                    </div>
                    <div class="form-group">
                        <label for="postContent">–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ (—Ç–µ–æ—Ä–∏—è):</label>
                        <textarea id="postContent" rows="5" required placeholder="–û–ø–∏—à–∏ —Å–∏—Ç—É–∞—Ü–∏—é, –æ–±—ä—è—Å–Ω–∏ –ø—Ä–∞–≤–∏–ª–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏..."></textarea>
                    </div>
                    <div class="form-group">
                        <label><input type="checkbox" id="addPoll" onchange="togglePollFields()"> –î–æ–±–∞–≤–∏—Ç—å –æ–ø—Ä–æ—Å –∫ –ø–æ—Å—Ç—É</label>
                    </div>

                    <div id="pollFields" class="poll-fields hidden">
                        <div class="form-group">
                            <label for="pollQuestion">–í–æ–ø—Ä–æ—Å –æ–ø—Ä–æ—Å–∞:</label>
                            <input type="text" id="pollQuestion" placeholder="–ß—Ç–æ –±—ã —Ç—ã —Å–¥–µ–ª–∞–ª –≤ —ç—Ç–æ–π —Å–∏—Ç—É–∞—Ü–∏–∏?">
                        </div>
                        <div class="form-group">
                            <label for="pollAnswer1">–í–∞—Ä–∏–∞–Ω—Ç –æ—Ç–≤–µ—Ç–∞ 1:</label>
                            <input type="text" id="pollAnswer1" placeholder="–ü–µ—Ä–≤—ã–π –≤–∞—Ä–∏–∞–Ω—Ç">
                        </div>
                        <div class="form-group">
                            <label for="pollAnswer2">–í–∞—Ä–∏–∞–Ω—Ç –æ—Ç–≤–µ—Ç–∞ 2:</label>
                            <input type="text" id="pollAnswer2" placeholder="–í—Ç–æ—Ä–æ–π –≤–∞—Ä–∏–∞–Ω—Ç">
                        </div>
                        <div class="form-group">
                            <label for="pollAnswer3">–í–∞—Ä–∏–∞–Ω—Ç –æ—Ç–≤–µ—Ç–∞ 3 (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ):</label>
                            <input type="text" id="pollAnswer3" placeholder="–¢—Ä–µ—Ç–∏–π –≤–∞—Ä–∏–∞–Ω—Ç">
                        </div>
                    </div>

                    <button type="submit" class="btn btn-admin">–û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –ø–æ—Å—Ç –≤ –ª–µ–Ω—Ç—É</button>
                </form>
            </section>

            <section class="existing-posts">
                <h2>üìú –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–æ—Å—Ç—ã (—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ)</h2>
                <div id="postsList">
                    <!-- –°–ø–∏—Å–æ–∫ –ø–æ—Å—Ç–æ–≤, —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö –∞–¥–º–∏–Ω–æ–º, –±—É–¥–µ—Ç –∑–¥–µ—Å—å -->
                </div>
            </section>
        </main>
    </div>

    <script>
        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º/—Å–∫—Ä—ã–≤–∞–µ–º –ø–æ–ª—è –¥–ª—è –æ–ø—Ä–æ—Å–∞
        function togglePollFields() {
            const pollFields = document.getElementById('pollFields');
            pollFields.classList.toggle('hidden');
        }

        // –§—É–Ω–∫—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–≥–æ –ø–æ—Å—Ç–∞
        function createNewPost(event) {
            event.preventDefault();

            const title = document.getElementById('postTitle').value;
            const content = document.getElementById('postContent').value;
            const addPoll = document.getElementById('addPoll').checked;

            // –°–æ–±–∏—Ä–∞–µ–º –¥–∞–Ω–Ω—ã–µ –ø–æ—Å—Ç–∞
            const newPost = {
                id: 'post-' + Date.now(), // —É–Ω–∏–∫–∞–ª—å–Ω—ã–π ID
                title: title,
                content: content,
                date: new Date().toLocaleDateString('ru-RU')
            };

            // –ï—Å–ª–∏ –µ—Å—Ç—å –æ–ø—Ä–æ—Å, –¥–æ–±–∞–≤–ª—è–µ–º –µ–≥–æ –¥–∞–Ω–Ω—ã–µ
            if (addPoll) {
                newPost.poll = true;
                newPost.pollQuestion = document.getElementById('pollQuestion').value;
                newPost.pollAnswer1 = document.getElementById('pollAnswer1').value;
                newPost.pollAnswer2 = document.getElementById('pollAnswer2').value;
                newPost.pollAnswer3 = document.getElementById('pollAnswer3').value;
            }

            // –ü–æ–ª—É—á–∞–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–æ—Å—Ç—ã –∏–∑ localStorage –∏–ª–∏ —Å–æ–∑–¥–∞–µ–º –ø—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤
            let posts = JSON.parse(localStorage.getItem('cyberPosts')) || [];
            // –î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—ã–π –ø–æ—Å—Ç –≤ –Ω–∞—á–∞–ª–æ –º–∞—Å—Å–∏–≤–∞
            posts.unshift(newPost);
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –æ–±—Ä–∞—Ç–Ω–æ –≤ localStorage
            localStorage.setItem('cyberPosts', JSON.stringify(posts));

            alert('–ü–æ—Å—Ç —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω! –û–Ω –ø–æ—è–≤–∏—Ç—Å—è –≤ –ª–µ–Ω—Ç–µ —É—á–µ–Ω–∏–∫–æ–≤.');
            // –û—á–∏—â–∞–µ–º —Ñ–æ—Ä–º—É
            document.getElementById('newPostForm').reset();
            // –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º —Å–ø–∏—Å–æ–∫ –ø–æ—Å—Ç–æ–≤
            loadPostsList();
            return false;
        }

        // –§—É–Ω–∫—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ —Å–ø–∏—Å–∫–∞ –ø–æ—Å—Ç–æ–≤ –¥–ª—è –∞–¥–º–∏–Ω–∞
        function loadPostsList() {
            const container = document.getElementById('postsList');
            const posts = JSON.parse(localStorage.getItem('cyberPosts')) || [];

            if (posts.length === 0) {
                container.innerHTML = '<p>–ü–æ–∫–∞ –Ω–µ—Ç —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö –ø–æ—Å—Ç–æ–≤.</p>';
                return;
            }

            let html = '';
            posts.forEach((post, index) => {
                html += `
                <div class="post-preview">
                    <h4>${post.title}</h4>
                    <p><small>${post.date} | ${post.poll ? 'üìä –° –æ–ø—Ä–æ—Å–æ–º' : 'üìù –¢–æ–ª—å–∫–æ —Ç–µ–∫—Å—Ç'}</small></p>
                    <button class="btn btn-small btn-delete" onclick="deletePost(${index})">–£–¥–∞–ª–∏—Ç—å</button>
                    <hr>
                </div>
                `;
            });
            container.innerHTML = html;
        }

        // –§—É–Ω–∫—Ü–∏—è —É–¥–∞–ª–µ–Ω–∏—è –ø–æ—Å—Ç–∞
        function deletePost(index) {
            if (confirm('–¢–æ—á–Ω–æ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç –ø–æ—Å—Ç?')) {
                let posts = JSON.parse(localStorage.getItem('cyberPosts')) || [];
                posts.splice(index, 1); // –£–¥–∞–ª—è–µ–º –ø–æ—Å—Ç –ø–æ –∏–Ω–¥–µ–∫—Å—É
                localStorage.setItem('cyberPosts', JSON.stringify(posts));
                loadPostsList(); // –û–±–Ω–æ–≤–ª—è–µ–º —Å–ø–∏—Å–æ–∫
            }
        }

        // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å–ø–∏—Å–æ–∫ –ø–æ—Å—Ç–æ–≤ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        window.onload = loadPostsList;
    </script>
</body>
</html>